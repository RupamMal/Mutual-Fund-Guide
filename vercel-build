#!/bin/bash
# Force Python 3.13 for Vercel build with size optimization
export PYTHON_VERSION=3.13
export PIP_NO_CACHE_DIR=1
export PIP_DISABLE_PIP_VERSION_CHECK=1

# Use production requirements for smaller bundle
python3.13 -m pip install --no-cache-dir --disable-pip-version-check --target . --upgrade -r requirements-prod.txt

# Clean up unnecessary files to reduce size
find . -type d -name "__pycache__" -exec rm -rf {} + 2>/dev/null || true
find . -type f -name "*.pyc" -delete 2>/dev/null || true
find . -type f -name "*.pyo" -delete 2>/dev/null || true
